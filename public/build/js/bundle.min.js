!function(){let t,e=!1;const n={destroy:!0,language:{url:"https://cdn.datatables.net/plug-ins/2.1.8/i18n/es-MX.json"},dom:'<"row mb-2"<"d-flex justify-content-start col-sm-6"f><"d-flex justify-content-end col-sm-6"B>><"row"<"col-sm-12"tr>><"row d-flex justify-content-between"<"col d-flex justify-content-start"l><"col d-flex justify-content-center"i><"col d-flex justify-content-end"p>>',buttons:[{extend:"excelHtml5",text:'<i class="fa-solid fa-file-excel"></i>',titleAttr:"Exportar a Excel",className:"btn btn-success"},{extend:"pdfHtml5",text:'<i class="fa-solid fa-file-pdf"></i>',titleAttr:"Exportar a PDF",className:"btn btn-danger"},{extend:"csvHtml5",text:'<i class="fa-solid fa-file-csv"></i>',titleAttr:"Exportar a CSV",className:"btn btn-primary"},{extend:"print",text:'<i class="fa-solid fa-print"></i>',titleAttr:"Imprimir",className:"btn btn-info"}],columnDefs:[{orderable:!1,targets:[3,4,7]}]};async function a(){e&&t.destroy(),await async function(){try{const t="http://localhost:3000/api/clientes/listar",e=await fetch(t);!function(t){const e=document.getElementById("tableBody_clients");e.innerHTML="",t.forEach((t,n)=>{const a=document.createElement("tr");a.innerHTML=`\n                <td>${n+1}</td> \n                <td>${t.nombre}</td>\n                <td>${t.apellidos}</td>\n                <td>${t.correo}</td>\n                <td>${t.telefono}</td>\n                <td>${t.documento_identidad}</td>\n                <td>${t.fecha_nacimiento}</td>\n                <td>\n                    <button class="btn btn-sm btn-primary" data-toggle="modal" data-target="#editarClienteModal${t.id}">\n                        <i class="fa-solid fa-pen"></i>\n                    </button>\n                    <button class="btn btn-sm btn-danger btn-eliminarCliente" data-id="${t.id}">\n                        <i class="fa-solid fa-trash"></i>\n                    </button>\n                </td>\n            `,e.appendChild(a)}),e.addEventListener("click",o)}(await e.json())}catch(t){console.error("Error al listar clientes:",t)}}(),t=$("#datatable_clients").DataTable(n),e=!0}function o(t){const e=t.target;if(e.classList.contains("btn-actualizarCliente")){const t=e.getAttribute("data-id");actualizarCliente(t)}else if(e.classList.contains("btn-eliminarCliente")){const t=e.getAttribute("data-id");n=t,Swal.fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(async t=>{t.isConfirmed&&(await async function(t){try{const e=new FormData;e.append("id",t);const n="http://localhost:3000/api/clientes/eliminar",a=await fetch(n,{method:"POST",body:e}),o=await a.json();i(o.titulo,o.mensaje,o.tipo)}catch(t){console.error("Error al eliminar cliente:",t)}}(n),await a())})}var n}function i(t,e,n){Swal.fire({icon:n,title:t,text:e})}a(),document.querySelector(".btnAgregarCliente").addEventListener("click",(async function(){const t={nombre:document.getElementById("nombre").value.trim(),apellidos:document.getElementById("apellidos").value.trim(),correo:document.getElementById("correo").value.trim(),telefono:document.getElementById("telefono").value.trim(),documento_identidad:document.getElementById("documento_identidad").value.trim(),fecha_nacimiento:document.getElementById("fecha_nacimiento").value};if(!t.nombre||!t.apellidos||!t.correo)return void i("Error","Todos los campos son obligatorios","error");try{const e=new FormData;Object.entries(t).forEach(([t,n])=>e.append(t,n));const n="http://localhost:3000/api/clientes/crear",o=await fetch(n,{method:"POST",body:e}),l=await o.json();i(l.titulo,l.mensaje,l.tipo),$("#clientesModal").modal("hide"),await a()}catch(t){console.error("Error al agregar cliente:",t)}}))}(),function(){let t,e=!1;const n={destroy:!0,language:{url:"https://cdn.datatables.net/plug-ins/2.1.8/i18n/es-MX.json"},columnDefs:[{orderable:!1,targets:[3,4,8]}]},a={1:"Administrador",2:"Empleado General",3:"Limpieza"},o={1:"Activo",0:"Inactivo"};async function i(){e&&t.destroy(),await async function(){try{const t="http://localhost:3000/api/usuarios/listar",e=await fetch(t),n=await e.json(),i=document.getElementById("tableBody_users");i.innerHTML="",n.forEach((t,e)=>{const n=document.createElement("tr");n.innerHTML=`\n                    <td>${e+1}</td> \n                    <td>${t.nombre}</td>\n                    <td>${t.apellido}</td>\n                    <td>${t.direccion}</td>\n                    <td>${t.email}</td>\n                    <td>${a[t.rol_id]}</td> \x3c!-- Muestra el rol legible --\x3e\n                    <td>${o[t.estatus]}</td> \x3c!-- Muestra el estatus legible --\x3e\n                    <td>${t.fecha_creacion}</td>\n                    <td>\n                        \x3c!-- Botón de editar --\x3e\n                        <button class="btn btn-sm btn-primary">\n                            <i class="fa-solid fa-pen"></i>\n                        </button>\n\n                        \x3c!-- Formulario para eliminar --\x3e\n                        <form method="POST" action="/admin/usuarios/eliminar" class="d-inline">\n                            <input type="hidden" name="id" value="${t.id}">\n                            <button class="btn btn-sm btn-danger" type="submit">\n                                <i class="fa-solid fa-trash"></i>\n                            </button>\n                        </form>\n                    </td>\n                `,i.appendChild(n)})}catch(t){console.log(t)}}(),t=$("#datatable_users").DataTable(n),e=!0}window.addEventListener("load",async()=>{await i()})}();
//# sourceMappingURL=bundle.js.map
