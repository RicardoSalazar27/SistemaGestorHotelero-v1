!function(){let t,e=!1;const a={destroy:!0,language:{url:"https://cdn.datatables.net/plug-ins/2.1.8/i18n/es-MX.json"},dom:'<"row mb-2"<"d-flex justify-content-start col-sm-6"f><"d-flex justify-content-end col-sm-6"B>><"row"<"col-sm-12"tr>><"row d-flex justify-content-between"<"col d-flex justify-content-start"l><"col d-flex justify-content-center"i><"col d-flex justify-content-end"p>>',buttons:[{extend:"excelHtml5",text:'<i class="fa-solid fa-file-excel"></i>',titleAttr:"Exportar a Excel",exportOptions:{columns:":not(.no-export)"},className:"btn btn-success"},{extend:"pdfHtml5",text:'<i class="fa-solid fa-file-pdf"></i>',titleAttr:"Exportar a PDF",exportOptions:{columns:":not(.no-export)"},className:"btn btn-danger"},{extend:"csvHtml5",text:'<i class="fa-solid fa-file-csv"></i>',titleAttr:"Exportar a CSV",exportOptions:{columns:":not(.no-export)"},className:"btn btn-primary"},{extend:"print",text:'<i class="fa-solid fa-print"></i>',titleAttr:"Imprimir",exportOptions:{columns:":not(.no-export)"},className:"btn btn-info"}],columnDefs:[{orderable:!1,targets:[2]}]};async function n(){e&&t.destroy(),await async function(){try{const t="http://localhost:3000/api/categorias/listar",e=await fetch(t),a=await e.json(),o={0:"Inactivo",1:"Activo"},l=document.getElementById("tableBody_categorias");l.innerHTML="",a.forEach((t,e)=>{const a=document.createElement("tr");a.innerHTML=`\n                    <td>${e+1}</td> \n                    <td>${t.nombre}</td>\n                    <td class="text-center">${t.capacidad_maxima}</td>\n                    <td>${o[t.estatus]}</td>\n                    <td>\n                        \x3c!-- Botón de editar que abre el modal --\x3e\n                        <button class="btn btn-sm btn-primary" data-toggle="modal" data-target="#editarCategoriaModal${t.id}">\n                            <i class="fa-solid fa-pen"></i>\n                        </button>\n\n                        \x3c!-- Modal Editar Categoria --\x3e\n                        <div class="modal fade modal-editarCategoria" id="editarCategoriaModal${t.id}" tabindex="-1" role="dialog" aria-labelledby="categoriasModalLabel" aria-hidden="true">\n                            <div class="modal-dialog" role="document">\n                                <div class="modal-content">\n                                    <div class="modal-header">\n                                        <h5 class="modal-title" id="categoriasModalLabel">Editar Categoria</h5>\n                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                            <span aria-hidden="true">&times;</span>\n                                        </button>\n                                    </div>\n                                    <div class="modal-body">\n                                        <form method="POST">\n                                            <div class="form-group">\n                                                <label for="nombre">Nombre</label>\n                                                <input type="text" class="form-control" id="nombre${t.id}" name="nombre" value="${t.nombre}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="capacidad_maxima">Capacidad Maxima</label>\n                                                <input type="number" class="form-control" id="capacidad_maxima${t.id}" name="capacidad_maxima" value="${t.capacidad_maxima}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="estatus">Estatus</label>\n                                                <select class="form-control" id="estatus${t.id}" name="estatus">\n                                                    <option value="1" ${1==t.estatus?"selected":""}>Activo</option>\n                                                    <option value="0" ${0==t.estatus?"selected":""}>Inactivo</option>\n                                                </select>\n                                            </div>\n                                            <div class="modal-footer">\n                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>\n                                                <button type="button" class="btn btn-primary btn-actualizarCategoria" data-id="${t.id}">Guardar</button>\n                                            </div>\n                                        </form>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        \x3c!-- Botón de eliminar --\x3e\n                        <button class="btn btn-sm btn-danger btn-eliminarCategoria" data-id="${t.id}">\n                            <i class="fa-solid fa-trash"></i>\n                        </button>\n                    </td>\n                `,l.appendChild(a)}),l.addEventListener("click",(function(t){if(t.target.classList.contains("btn-actualizarCategoria")){!async function(t){const e={id:t,nombre:document.querySelector("#nombre"+t).value.trim(),capacidad_maxima:document.querySelector("#capacidad_maxima"+t).value.trim(),estatus:document.querySelector("#estatus"+t).value};await async function(t){const e=new FormData;Object.entries(t).forEach(([t,a])=>e.append(t,a));try{const a="http://localhost:3000/api/categorias/actualizar",o=await fetch(a,{method:"POST",body:e}),l=await o.json();i(l.titulo,l.mensaje,l.tipo);const s=document.querySelector("#editarCategoriaModal"+t.id);s&&$(s).modal("hide"),await n()}catch(t){console.log(t)}}(e)}(t.target.getAttribute("data-id"))}if(t.target.classList.contains("btn-eliminarCategoria")){const a=t.target.getAttribute("data-id");e=a,Swal.fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(async t=>{if(t.isConfirmed)try{const t=new FormData;t.append("id",e);const a="http://localhost:3000/api/categorias/eliminar",o=await fetch(a,{method:"POST",body:t}),l=await o.json();i(l.titulo,l.mensaje,l.tipo),"success"===l.tipo&&await n()}catch(t){console.error(t)}})}var e}))}catch(t){console.log(t)}}(),t=$("#datatable_categorias").DataTable(a),e=!0}n();const o=document.querySelector(".btnSubirCategoria");function i(t,e,a){Swal.fire({icon:a,title:t,text:e}).then(()=>{$(".modal").modal("hide")})}o&&o.addEventListener("click",(async function(){const t={nombre:document.getElementById("nombre").value.trim(),capacidad_maxima:document.getElementById("capacidad_maxima").value.trim(),estatus:document.getElementById("estatus").value};if(t.nombre&&t.capacidad_maxima)try{const e=new FormData;Object.entries(t).forEach(([t,a])=>e.append(t,a));const a="http://localhost:3000/api/categorias/crear",o=await fetch(a,{method:"POST",body:e}),l=await o.json();i(l.titulo,l.mensaje,l.tipo),$("#categoriasModal").modal("hide"),await n()}catch(t){console.log(t)}else i("Error","Todos los campos son oblighatorios","error")}))}(),function(){let t,e=!1;const a={destroy:!0,language:{url:"https://cdn.datatables.net/plug-ins/2.1.8/i18n/es-MX.json"},dom:'<"row mb-2"<"d-flex justify-content-start col-sm-6"f><"d-flex justify-content-end col-sm-6"B>><"row"<"col-sm-12"tr>><"row d-flex justify-content-between"<"col d-flex justify-content-start"l><"col d-flex justify-content-center"i><"col d-flex justify-content-end"p>>',buttons:[{extend:"excelHtml5",text:'<i class="fa-solid fa-file-excel"></i>',titleAttr:"Exportar a Excel",exportOptions:{columns:":not(.no-export)"},className:"btn btn-success"},{extend:"pdfHtml5",text:'<i class="fa-solid fa-file-pdf"></i>',titleAttr:"Exportar a PDF",exportOptions:{columns:":not(.no-export)"},className:"btn btn-danger"},{extend:"csvHtml5",text:'<i class="fa-solid fa-file-csv"></i>',titleAttr:"Exportar a CSV",exportOptions:{columns:":not(.no-export)"},className:"btn btn-primary"},{extend:"print",text:'<i class="fa-solid fa-print"></i>',titleAttr:"Imprimir",exportOptions:{columns:":not(.no-export)"},className:"btn btn-info"}],columnDefs:[{orderable:!1,targets:[3,4,7]}]};async function n(){e&&t.destroy(),await async function(){try{const t="http://localhost:3000/api/clientes/listar",e=await fetch(t),a=await e.json(),i=document.getElementById("tableBody_clients");i.innerHTML="",a.forEach((t,e)=>{const a=document.createElement("tr");a.innerHTML=`\n                    <td>${e+1}</td> \n                    <td>${t.nombre}</td>\n                    <td>${t.apellidos}</td>\n                    <td>${t.correo}</td>\n                    <td>${t.telefono}</td>\n                    <td>${t.documento_identidad}</td>\n                    <td>${t.fecha_nacimiento}</td>\n                    <td>\n                        \x3c!-- Botón de editar que abre el modal --\x3e\n                        <button class="btn btn-sm btn-primary" data-toggle="modal" data-target="#editarClienteModal${t.id}">\n                            <i class="fa-solid fa-pen"></i>\n                        </button>\n\n                        \x3c!-- Modal Editar Cliente --\x3e\n                        <div class="modal fade modal-editarCliente" id="editarClienteModal${t.id}" tabindex="-1" role="dialog" aria-labelledby="clientesModalLabel" aria-hidden="true">\n                            <div class="modal-dialog" role="document">\n                                <div class="modal-content">\n                                    <div class="modal-header">\n                                        <h5 class="modal-title" id="clientesModalLabel">Editar Cliente</h5>\n                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                            <span aria-hidden="true">&times;</span>\n                                        </button>\n                                    </div>\n                                    <div class="modal-body">\n                                        <form method="POST">\n                                            <div class="form-group">\n                                                <label for="nombre">Nombre</label>\n                                                <input type="text" class="form-control" id="nombre${t.id}" name="nombre" value="${t.nombre}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="apellidos">Apellidos</label>\n                                                <input type="text" class="form-control" id="apellidos${t.id}" name="apellidos" value="${t.apellidos}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="correo">Correo</label>\n                                                <input type="email" class="form-control" id="correo${t.id}" name="correo" value="${t.correo}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="telefono">Telefono</label>\n                                                <input type="text" class="form-control" id="telefono${t.id}" name="telefono" value="${t.telefono}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="documento_identidad">DNI</label>\n                                                <input type="text" class="form-control" id="documento_identidad${t.id}" name="documento_identidad" value="${t.documento_identidad}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="fecha_nacimiento">Fecha de Nacimiento</label>\n                                                <input type="date" class="form-control" id="fecha_nacimiento${t.id}" name="fecha_nacimiento" value="${t.fecha_nacimiento}" />\n                                            </div>\n                                            <div class="modal-footer">\n                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>\n                                                <button type="button" class="btn btn-primary btn-actualizarCliente" data-id="${t.id}">Guardar</button>\n                                            </div>\n                                        </form>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        \x3c!-- Botón de eliminar --\x3e\n                        <button class="btn btn-sm btn-danger btn-eliminarCliente" data-id="${t.id}">\n                            <i class="fa-solid fa-trash"></i>\n                        </button>\n                    </td>\n                `,i.appendChild(a)}),i.addEventListener("click",(function(t){if(t.target.classList.contains("btn-actualizarCliente")){!async function(t){const e={id:t,nombre:document.querySelector("#nombre"+t).value.trim(),apellidos:document.querySelector("#apellidos"+t).value.trim(),correo:document.querySelector("#correo"+t).value.trim(),telefono:document.querySelector("#telefono"+t).value.trim(),documento_identidad:document.querySelector("#documento_identidad"+t).value.trim(),fecha_nacimiento:document.querySelector("#fecha_nacimiento"+t).value};await async function(t){const e=new FormData;Object.entries(t).forEach(([t,a])=>e.append(t,a));try{const a="http://localhost:3000/api/clientes/actualizar",i=await fetch(a,{method:"POST",body:e}),l=await i.json();o(l.titulo,l.mensaje,l.tipo);const s=document.querySelector("#editarClienteModal"+t.id);s&&$(s).modal("hide"),await n()}catch(t){console.log(t)}}(e)}(t.target.getAttribute("data-id"))}if(t.target.classList.contains("btn-eliminarCliente")){const a=t.target.getAttribute("data-id");e=a,Swal.fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(async t=>{if(t.isConfirmed)try{const t=new FormData;t.append("id",e);const a="http://localhost:3000/api/clientes/eliminar",i=await fetch(a,{method:"POST",body:t}),l=await i.json();o(l.titulo,l.mensaje,l.tipo),"success"===l.tipo&&await n()}catch(t){console.error(t)}})}var e}))}catch(t){console.log(t)}}(),t=$("#datatable_clients").DataTable(a),e=!0}n();function o(t,e,a){Swal.fire({icon:a,title:t,text:e}).then(()=>{$(".modal").modal("hide")})}document.querySelector(".btnSubirCliente")&&document.querySelector(".btnSubirCliente").addEventListener("click",(async function(){const t={nombre:document.getElementById("nombre").value.trim(),apellidos:document.getElementById("apellidos").value.trim(),correo:document.getElementById("correo").value.trim(),telefono:document.getElementById("telefono").value.trim(),documento_identidad:document.getElementById("documento_identidad").value.trim(),fecha_nacimiento:document.getElementById("fecha_nacimiento").value};if(t.nombre&&t.apellidos&&t.correo)try{const e=new FormData;Object.entries(t).forEach(([t,a])=>e.append(t,a));const a="http://localhost:3000/api/clientes/crear",i=await fetch(a,{method:"POST",body:e}),l=await i.json();o(l.titulo,l.mensaje,l.tipo),$("#clientesModal").modal("hide"),await n()}catch(t){console.log(t)}else o("Error","Todos los campos son obligatorios","error")}))}(),function(){let t,e=!1;const a={destroy:!0,language:{url:"https://cdn.datatables.net/plug-ins/2.1.8/i18n/es-MX.json"},dom:'<"row mb-2"<"d-flex justify-content-start col-sm-6"f><"d-flex justify-content-end col-sm-6"B>><"row"<"col-sm-12"tr>><"row d-flex justify-content-between"<"col d-flex justify-content-start"l><"col d-flex justify-content-center"i><"col d-flex justify-content-end"p>>',buttons:[{extend:"excelHtml5",text:'<i class="fa-solid fa-file-excel"></i>',titleAttr:"Exportar a Excel",exportOptions:{columns:":not(.no-export)"},className:"btn btn-success"},{extend:"pdfHtml5",text:'<i class="fa-solid fa-file-pdf"></i>',titleAttr:"Exportar a PDF",exportOptions:{columns:":not(.no-export)"},className:"btn btn-danger"},{extend:"csvHtml5",text:'<i class="fa-solid fa-file-csv"></i>',titleAttr:"Exportar a CSV",exportOptions:{columns:":not(.no-export)"},className:"btn btn-primary"},{extend:"print",text:'<i class="fa-solid fa-print"></i>',titleAttr:"Imprimir",exportOptions:{columns:":not(.no-export)"},className:"btn btn-info"}],columnDefs:[{orderable:!1,targets:[6,8]},{visible:!1,targets:[5,8]}]};async function n(){e&&t.destroy(),await async function(){try{const t="http://localhost:3000/api/habitaciones/listar",e=await fetch(t),a=await e.json(),i="http://localhost:3000/api/niveles/listar",l=await fetch(i),s=await l.json(),d="http://localhost:3000/api/categorias/listar",r=await fetch(d),c=await r.json(),m={0:"Inactivo",1:"Activo"},u=document.getElementById("tableBody_habitaciones");u.innerHTML="",a.forEach((t,e)=>{const a=s.find(e=>e.id===t.nivel_id),n=a?a.nombre:"Sin Nivel",o=c.find(e=>e.id===t.categoria_id),i=o?o.nombre:"Sin Categoria";let l="";s.forEach(e=>{l+=`\n                        <option value="${e.id}" ${t.nivel_id===e.id?"selected":""}>${e.nombre}</option>\n                    `});let d="";c.forEach(e=>{d+=`\n                        <option value="${e.id}" ${t.categoria_id===e.id?"selected":""}>${e.nombre}</option>\n                    `});const r=document.createElement("tr");r.innerHTML=`\n                    <td>${e+1}</td> \n                    <td>${t.nombre}</td>\n                    <td>${n}</td> \x3c!-- Muestra el nombre del nivel en lugar del ID --\x3e\n                    <td>${i}</td>\n                    <td>${t.precio}</td>\n                    <td>${t.tarifa}</td>\n                    <td>${t.detalles}</td>\n                    <td>${m[t.estatus]}</td>\n                    <td>${t.estado_id}</td>\n                    <td>\n                        \x3c!-- Botón de editar que abre el modal --\x3e\n                        <button class="btn btn-sm btn-primary" data-toggle="modal" data-target="#editarHabitacionModal${t.id}">\n                            <i class="fa-solid fa-pen"></i>\n                        </button>\n\n                        \x3c!-- Modal Editar Habitacion --\x3e\n                        <div class="modal fade modal-editarHabitacion" id="editarHabitacionModal${t.id}" tabindex="-1" role="dialog" aria-labelledby="habitacionesModalLabel" aria-hidden="true">\n\n                            <div class="modal-dialog" role="document">\n                                <div class="modal-content">\n                                    <div class="modal-header">\n                                        <h5 class="modal-title" id="habitacionesModalLabel">Editar Habitacion</h5>\n                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                            <span aria-hidden="true">&times;</span>\n                                        </button>\n                                    </div>\n                                    <div class="modal-body">\n                                        <form method="POST">\n                                            <div class="form-group">\n                                                <label for="nombre">Nombre</label>\n                                                <input type="text" class="form-control" id="nombre${t.id}" name="nombre" value="${t.nombre}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="nivel_id">Nivel</label>\n                                                <select class="form-control" id="nivel_id${t.id}" name="nivel_id">\n                                                     ${l} \x3c!-- Aquí se incluyen todas las opciones generadas --\x3e\n                                                </select>\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="categoria_id">Categoria</label>\n                                                <select class="form-control" id="categoria_id${t.id}" name="categoria_id">\n                                                     ${d} \x3c!-- Aquí se incluyen todas las opciones generadas --\x3e\n                                                </select>\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="precio">Precio</label>\n                                                <input type="number" class="form-control" id="precio${t.id}" name="precio" value="${t.precio}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="detalles">Detalles</label>\n                                                <input type="text" class="form-control" id="detalles${t.id}" name="detalles" value="${t.detalles}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="estatus">Estatus</label>\n                                                <select class="form-control" id="estatus${t.id}" name="estatus">\n                                                    <option value="1" ${1==t.estatus?"selected":""}>Activo</option>\n                                                    <option value="0" ${0==t.estatus?"selected":""}>Inactivo</option>\n                                                </select>\n                                            </div>\n                                            <div class="modal-footer">\n                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>\n                                                <button type="button" class="btn btn-primary btn-actualizarHabitacion" data-id="${t.id}">Guardar</button>\n                                            </div>\n                                        </form>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n    \n                        \x3c!-- Botón de eliminar --\x3e\n                        <button class="btn btn-sm btn-danger btn-eliminarHabitacion" data-id="${t.id}">\n                            <i class="fa-solid fa-trash"></i>\n                        </button>\n                    </td>\n                `,u.appendChild(r)}),u.addEventListener("click",(function(t){if(t.target.classList.contains("btn-actualizarHabitacion")){!async function(t){const e={id:t,nombre:document.querySelector("#nombre"+t).value.trim(),nivel_id:document.querySelector("#nivel_id"+t).value.trim(),categoria_id:document.querySelector("#categoria_id"+t).value.trim(),precio:document.querySelector("#precio"+t).value.trim(),detalles:document.querySelector("#detalles"+t).value.trim(),estatus:document.querySelector("#estatus"+t).value};await async function(t){const e=new FormData;Object.entries(t).forEach(([t,a])=>e.append(t,a));try{const a="http://localhost:3000/api/habitaciones/actualizar",i=await fetch(a,{method:"POST",body:e}),l=await i.json();o(l.titulo,l.mensaje,l.tipo);const s=document.querySelector("#editarHabitacionModal"+t.id);s&&$(s).modal("hide"),await n()}catch(t){console.log(t)}}(e)}(t.target.getAttribute("data-id"))}if(t.target.classList.contains("btn-eliminarHabitacion")){const a=t.target.getAttribute("data-id");e=a,Swal.fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(async t=>{if(t.isConfirmed)try{const t=new FormData;t.append("id",e);const a="http://localhost:3000/api/habitaciones/eliminar",i=await fetch(a,{method:"POST",body:t}),l=await i.json();o(l.titulo,l.mensaje,l.tipo),"success"===l.tipo&&await n()}catch(t){console.error(t)}})}var e}))}catch(t){console.log(t)}}(),t=$("#datatable_habitaciones").DataTable(a),e=!0}n();function o(t,e,a){Swal.fire({icon:a,title:t,text:e}).then(()=>{$(".modal").modal("hide")})}document.querySelector(".btnSubirHabitacion")&&document.querySelector(".btnSubirHabitacion").addEventListener("click",(async function(){const t={nombre:document.getElementById("nombre").value.trim(),nivel_id:document.getElementById("nivel_id").value,categoria_id:document.getElementById("categoria_id").value,precio:document.getElementById("precio").value,tarifa:document.getElementById("tarifa").value,detalles:document.getElementById("detalles").value,estatus:document.getElementById("estatus").value};if(t.nombre&&t.nivel_id&&t.categoria_id&&t.precio&&t.detalles)try{const e=new FormData;Object.entries(t).forEach(([t,a])=>e.append(t,a));const a="http://localhost:3000/api/habitaciones/crear",i=await fetch(a,{method:"POST",body:e}),l=await i.json();o(l.titulo,l.mensaje,l.tipo),$("#habitacionesModal").modal("hide"),await n()}catch(t){console.log(t)}else o("Error","Todos los campos son obligatorios","error")}))}(),function(){let t,e=!1;const a={destroy:!0,language:{url:"https://cdn.datatables.net/plug-ins/2.1.8/i18n/es-MX.json"},dom:'<"row mb-2"<"d-flex justify-content-start col-sm-6"f><"d-flex justify-content-end col-sm-6"B>><"row"<"col-sm-12"tr>><"row d-flex justify-content-between"<"col d-flex justify-content-start"l><"col d-flex justify-content-center"i><"col d-flex justify-content-end"p>>',buttons:[{extend:"excelHtml5",text:'<i class="fa-solid fa-file-excel"></i>',titleAttr:"Exportar a Excel",exportOptions:{columns:":not(.no-export)"},className:"btn btn-success"},{extend:"pdfHtml5",text:'<i class="fa-solid fa-file-pdf"></i>',titleAttr:"Exportar a PDF",exportOptions:{columns:":not(.no-export)"},className:"btn btn-danger"},{extend:"csvHtml5",text:'<i class="fa-solid fa-file-csv"></i>',titleAttr:"Exportar a CSV",exportOptions:{columns:":not(.no-export)"},className:"btn btn-primary"},{extend:"print",text:'<i class="fa-solid fa-print"></i>',titleAttr:"Imprimir",exportOptions:{columns:":not(.no-export)"},className:"btn btn-info"}],columnDefs:[{orderable:!1,targets:[2]}]};async function n(){e&&t.destroy(),await async function(){try{const t="http://localhost:3000/api/niveles/listar",e=await fetch(t),a=await e.json(),o={0:"Inactivo",1:"Activo"},l=document.getElementById("tableBody_niveles");l.innerHTML="",a.forEach((t,e)=>{const a=document.createElement("tr");a.innerHTML=`\n                    <td>${t.numero}</td> \n                    <td>${t.nombre}</td>\n                    <td>${o[t.estatus]}</td>\n                    <td>\n                        \x3c!-- Botón de editar que abre el modal --\x3e\n                        <button class="btn btn-sm btn-primary" data-toggle="modal" data-target="#editarNivelModal${t.id}">\n                            <i class="fa-solid fa-pen"></i>\n                        </button>\n\n                        \x3c!-- Modal Editar Categoria --\x3e\n                        <div class="modal fade modal-editarNivel" id="editarNivelModal${t.id}" tabindex="-1" role="dialog" aria-labelledby="nivelesModalLabel" aria-hidden="true">\n                            <div class="modal-dialog" role="document">\n                                <div class="modal-content">\n                                    <div class="modal-header">\n                                        <h5 class="modal-title" id="nivelesModalLabel">Editar Nivel</h5>\n                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                            <span aria-hidden="true">&times;</span>\n                                        </button>\n                                    </div>\n                                    <div class="modal-body">\n                                        <form method="POST">\n                                            <div class="form-group">\n                                                <label for="nombre">Numero</label>\n                                                <input type="number" class="form-control" id="numero${t.id}" name="numero" value="${t.numero}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="capacidad_maxima">Nombre</label>\n                                                <input type="text" class="form-control" id="nombre${t.id}" name="nombre" value="${t.nombre}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="estatus">Estatus</label>\n                                                <select class="form-control" id="estatus${t.id}" name="estatus">\n                                                    <option value="1" ${1==t.estatus?"selected":""}>Activo</option>\n                                                    <option value="0" ${0==t.estatus?"selected":""}>Inactivo</option>\n                                                </select>\n                                            </div>\n                                            <div class="modal-footer">\n                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>\n                                                <button type="button" class="btn btn-primary btn-actualizarNivel" data-id="${t.id}">Guardar</button>\n                                            </div>\n                                        </form>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        \x3c!-- Botón de eliminar --\x3e\n                        <button class="btn btn-sm btn-danger btn-eliminarNivel" data-id="${t.id}">\n                            <i class="fa-solid fa-trash"></i>\n                        </button>\n                    </td>\n                `,l.appendChild(a)}),l.addEventListener("click",(function(t){if(t.target.classList.contains("btn-actualizarNivel")){!async function(t){const e={id:t,numero:document.querySelector("#numero"+t).value,nombre:document.querySelector("#nombre"+t).value.trim(),estatus:document.querySelector("#estatus"+t).value};await async function(t){const e=new FormData;Object.entries(t).forEach(([t,a])=>e.append(t,a));try{const a="http://localhost:3000/api/niveles/actualizar",o=await fetch(a,{method:"POST",body:e}),l=await o.json();i(l.titulo,l.mensaje,l.tipo);const s=document.querySelector("#editarNivelModal"+t.id);s&&$(s).modal("hide"),await n()}catch(t){console.log(t)}}(e)}(t.target.getAttribute("data-id"))}if(t.target.classList.contains("btn-eliminarNivel")){const a=t.target.getAttribute("data-id");e=a,Swal.fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(async t=>{if(t.isConfirmed)try{const t=new FormData;t.append("id",e);const a="http://localhost:3000/api/niveles/eliminar",o=await fetch(a,{method:"POST",body:t}),l=await o.json();i(l.titulo,l.mensaje,l.tipo),"success"===l.tipo&&await n()}catch(t){console.error(t)}})}var e}))}catch(t){console.log(t)}}(),t=$("#datatable_niveles").DataTable(a),e=!0}n();const o=document.querySelector(".btnSubirNivel");function i(t,e,a){Swal.fire({icon:a,title:t,text:e}).then(()=>{$(".modal").modal("hide")})}o&&o.addEventListener("click",(async function(){const t={numero:document.getElementById("numero").value.trim(),nombre:document.getElementById("nombre").value.trim(),estatus:document.getElementById("estatus").value.trim()};if(t.numero&&t.nombre)try{const e=new FormData;Object.entries(t).forEach(([t,a])=>e.append(t,a));const a="http://localhost:3000/api/niveles/crear",o=await fetch(a,{method:"POST",body:e}),l=await o.json();i(l.titulo,l.mensaje,l.tipo),$("#nivelesModal").modal("hide"),await n()}catch(t){console.log(t)}else i("Error","Todos los campos son oblighatorios","error")}))}(),function(){let t,e=!1;const a={destroy:!0,language:{url:"https://cdn.datatables.net/plug-ins/2.1.8/i18n/es-MX.json"},dom:'<"row mb-2"<"d-flex justify-content-start col-sm-6"f><"d-flex justify-content-end col-sm-6"B>><"row"<"col-sm-12"tr>><"row d-flex justify-content-between"<"col d-flex justify-content-start"l><"col d-flex justify-content-center"i><"col d-flex justify-content-end"p>>',buttons:[{extend:"excelHtml5",text:'<i class="fa-solid fa-file-excel"></i>',titleAttr:"Exportar a Excel",exportOptions:{columns:":not(.no-export)"},className:"btn btn-success"},{extend:"pdfHtml5",text:'<i class="fa-solid fa-file-pdf"></i>',titleAttr:"Exportar a PDF",exportOptions:{columns:":not(.no-export)"},className:"btn btn-danger"},{extend:"csvHtml5",text:'<i class="fa-solid fa-file-csv"></i>',titleAttr:"Exportar a CSV",exportOptions:{columns:":not(.no-export)"},className:"btn btn-primary"},{extend:"print",text:'<i class="fa-solid fa-print"></i>',titleAttr:"Imprimir",exportOptions:{columns:":not(.no-export)"},className:"btn btn-info"}],columnDefs:[{orderable:!1,targets:[3,8]},{visible:!1,targets:[5,6,13,14]}]};async function n(){e&&t.destroy(),await async function(){const t={1:"Administrador",2:"General",3:"Limpieza"},e={0:"Inactivo",1:"Activo"};try{const a="http://localhost:3000/api/usuarios/listar",i=await fetch(a),l=await i.json(),s=document.getElementById("tableBody_users");s.innerHTML="",l.forEach((a,n)=>{const o=document.createElement("tr");o.innerHTML=`\n                    <td>${n+1}</td>\n                    <td>${a.nombre}</td>\n                    <td>${a.apellido}</td>\n                    <td>${a.direccion}</td>   \n                    <td>${a.email}</td>\n                    <td>${a.password}</td>\n                    <td>${a.password2}</td>\n                    <td>${a.fecha_nacimiento}</td>\n                    <td>${t[a.rol_id]}</td>\n                    <td>${e[a.estatus]}</td>\n                    <td>${a.fecha_creacion}</td>\n                    <td>${a.ultimo_acceso}</td>\n                    <td class="text-center">\n                        ${1==a.confirmado?'<i class="fa-solid fa-check-circle text-success" title="Confirmado"></i>':'<i class="fa-solid fa-times-circle text-danger" title="No Confirmado"></i>'}\n                    </td>\n                    <td>${a.password_actual}</td>\n                    <td>${a.password_nuevo}</td>\n                    <td>\n                        \x3c!-- Botón de editar que abre el modal --\x3e\n                        <button class="btn btn-sm btn-primary" data-toggle="modal" data-target="#editarUsuarioModal${a.id}">\n                            <i class="fa-solid fa-pen"></i>\n                        </button>\n\n                        \x3c!-- Modal Editar Usuario --\x3e\n                        <div class="modal fade modal-editarUsuario" id="editarUsuarioModal${a.id}" tabindex="-1" role="dialog" aria-labelledby="UsuarioModalLabel" aria-hidden="true">\n                            <div class="modal-dialog" role="document">\n                                <div class="modal-content">\n                                    <div class="modal-header">\n                                        <h5 class="modal-title" id="usuariosModalLabel">Editar Usuario</h5>\n                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                            <span aria-hidden="true">&times;</span>\n                                        </button>\n                                    </div>\n                                    <div class="modal-body">\n                                        <form method="POST">\n                                            <div class="form-group">\n                                                <label for="nombre">Nombre</label>\n                                                <input type="text" class="form-control" id="nombre${a.id}" name="nombre" value="${a.nombre}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="apellidos">Apellidos</label>\n                                                <input type="text" class="form-control" id="apellido${a.id}" name="apellidos" value="${a.apellido}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="direccion">Direccion</label>\n                                                <input type="text" class="form-control" id="direccion${a.id}" name="direccion" value="${a.direccion}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="correo">Correo</label>\n                                                <input type="email" class="form-control" id="correo${a.id}" name="correo" value="${a.email}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="fecha_nacimiento">Fecha de Nacimiento</label>\n                                                <input type="date" class="form-control" id="fecha_nacimiento${a.id}" name="fecha_nacimiento" value="${a.fecha_nacimiento}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="rol_id">Rol</label>\n                                                <select class="form-control" id="rol_id${a.id}" name="rol_id">\n                                                    <option value="1" ${1==a.rol_id?"selected":""}>Administrador</option>\n                                                    <option value="2" ${2==a.rol_id?"selected":""}>General</option>\n                                                    <option value="3" ${3==a.rol_id?"selected":""}>Limpieza</option>\n                                                </select>\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="estatus">Estatus</label>\n                                                <select class="form-control" id="estatus${a.id}" name="estatus">\n                                                    <option value="1" ${1==a.estatus?"selected":""}>Activo</option>\n                                                    <option value="0" ${0==a.estatus?"selected":""}>Inactivo</option>\n                                                </select>\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="confirmado">Confirmado</label>\n                                                <select class="form-control" id="confirmado${a.id}" name="confirmado">\n                                                    <option value="1" ${1==a.confirmado?"selected":""}>Confirmado</option>\n                                                    <option value="0" ${0==a.confirmado?"selected":""}>No Confirmado</option>\n                                                </select>\n                                            </div>\n                                            <div class="modal-footer">\n                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>\n                                                <button type="button" class="btn btn-primary btn-actualizarUsuario" data-id="${a.id}">Guardar</button>\n                                            </div>\n                                        </form>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    \n                        \x3c!-- Botón de eliminar --\x3e\n                        <button class="btn btn-sm btn-danger btn-eliminarUsuario" data-id="${a.id}">\n                            <i class="fa-solid fa-trash"></i>\n                        </button>\n                    </td>\n                `,s.appendChild(o)}),s.addEventListener("click",(function(t){if(t.target.classList.contains("btn-actualizarUsuario")){!async function(t){const e={id:t,nombre:document.querySelector("#nombre"+t).value.trim(),apellido:document.querySelector("#apellido"+t).value.trim(),direccion:document.querySelector("#direccion"+t).value.trim(),email:document.querySelector("#correo"+t).value.trim(),fecha_nacimiento:document.querySelector("#fecha_nacimiento"+t).value,rol_id:document.querySelector("#rol_id"+t).value,estatus:document.querySelector("#estatus"+t).value,confirmado:document.querySelector("#confirmado"+t).value};await async function(t){const e=new FormData;Object.entries(t).forEach(([t,a])=>e.append(t,a));try{const a="http://localhost:3000/api/usuarios/actualizar",i=await fetch(a,{method:"POST",body:e}),l=await i.json();o(l.titulo,l.mensaje,l.tipo);const s=document.querySelector("#editarUsuarioModal"+t.id);s&&$(s).modal("hide"),await n()}catch(t){console.log(t)}}(e)}(t.target.getAttribute("data-id"))}if(t.target.classList.contains("btn-eliminarUsuario")){const a=t.target.getAttribute("data-id");e=a,Swal.fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(async t=>{if(t.isConfirmed)try{const t=new FormData;t.append("id",e);const a="http://localhost:3000/api/usuarios/eliminar",i=await fetch(a,{method:"POST",body:t}),l=await i.json();o(l.titulo,l.mensaje,l.tipo),"success"===l.tipo&&await n()}catch(t){console.error(t)}})}var e}))}catch(t){console.log(t)}document.querySelector(".btnSubirUsuario")&&document.querySelector(".btnSubirUsuario").addEventListener("click",(async function(){const t={nombre:document.getElementById("nombre").value.trim(),apellido:document.getElementById("apellido").value.trim(),direccion:document.getElementById("direccion").value.trim(),email:document.getElementById("email").value.trim(),password:document.getElementById("password").value.trim(),password2:document.getElementById("password2").value.trim(),rol_id:document.getElementById("rol_id").value,fecha_nacimiento:document.getElementById("fecha_nacimiento").value};if(t.nombre&&t.apellido&&t.email)if(t.password==t.password2){delete t.password2;try{const e=new FormData;Object.entries(t).forEach(([t,a])=>e.append(t,a));const a="http://localhost:3000/api/usuarios/crear",i=await fetch(a,{method:"POST",body:e}),l=await i.json();o(l.titulo,l.mensaje,l.tipo),$("#usuariosModal").modal("hide"),await n()}catch(t){console.log(t)}}else o("Error","Las contraseñas no coinciden","error");else o("Error","Todos los campos son obligatorios","error")}))}(),t=$("#datatable_users").DataTable(a),e=!0}function o(t,e,a){Swal.fire({icon:a,title:t,text:e}).then(()=>{document.querySelectorAll(".modal-editarUsuario").forEach(t=>{$(t).hasClass("show")&&$(t).modal("hide")})})}n()}();
//# sourceMappingURL=bundle.js.map
