!function(){let t,e=!1;const n={destroy:!0,language:{url:"https://cdn.datatables.net/plug-ins/2.1.8/i18n/es-MX.json"},dom:'<"row mb-2"<"d-flex justify-content-start col-sm-6"f><"d-flex justify-content-end col-sm-6"B>><"row"<"col-sm-12"tr>><"row d-flex justify-content-between"<"col d-flex justify-content-start"l><"col d-flex justify-content-center"i><"col d-flex justify-content-end"p>>',buttons:[{extend:"excelHtml5",text:'<i class="fa-solid fa-file-excel"></i>',titleAttr:"Exportar a Excel",exportOptions:{columns:":not(.no-export)"},className:"btn btn-success"},{extend:"pdfHtml5",text:'<i class="fa-solid fa-file-pdf"></i>',titleAttr:"Exportar a PDF",exportOptions:{columns:":not(.no-export)"},className:"btn btn-danger"},{extend:"csvHtml5",text:'<i class="fa-solid fa-file-csv"></i>',titleAttr:"Exportar a CSV",exportOptions:{columns:":not(.no-export)"},className:"btn btn-primary"},{extend:"print",text:'<i class="fa-solid fa-print"></i>',titleAttr:"Imprimir",exportOptions:{columns:":not(.no-export)"},className:"btn btn-info"}],columnDefs:[{orderable:!1,targets:[3,4,7]}]};async function o(){e&&t.destroy(),await async function(){try{const t="http://localhost:3000/api/clientes/listar",e=await fetch(t),n=await e.json(),i=document.getElementById("tableBody_clients");i.innerHTML="",n.forEach((t,e)=>{const n=document.createElement("tr");n.innerHTML=`\n                    <td>${e+1}</td> \n                    <td>${t.nombre}</td>\n                    <td>${t.apellidos}</td>\n                    <td>${t.correo}</td>\n                    <td>${t.telefono}</td>\n                    <td>${t.documento_identidad}</td>\n                    <td>${t.fecha_nacimiento}</td>\n                    <td>\n                        \x3c!-- Botón de editar que abre el modal --\x3e\n                        <button class="btn btn-sm btn-primary" data-toggle="modal" data-target="#editarClienteModal${t.id}">\n                            <i class="fa-solid fa-pen"></i>\n                        </button>\n\n                        \x3c!-- Modal Editar Cliente --\x3e\n                        <div class="modal fade modal-editarCliente" id="editarClienteModal${t.id}" tabindex="-1" role="dialog" aria-labelledby="clientesModalLabel" aria-hidden="true">\n                            <div class="modal-dialog" role="document">\n                                <div class="modal-content">\n                                    <div class="modal-header">\n                                        <h5 class="modal-title" id="clientesModalLabel">Editar Cliente</h5>\n                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                            <span aria-hidden="true">&times;</span>\n                                        </button>\n                                    </div>\n                                    <div class="modal-body">\n                                        <form method="POST">\n                                            <div class="form-group">\n                                                <label for="nombre">Nombre</label>\n                                                <input type="text" class="form-control" id="nombre${t.id}" name="nombre" value="${t.nombre}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="apellidos">Apellidos</label>\n                                                <input type="text" class="form-control" id="apellidos${t.id}" name="apellidos" value="${t.apellidos}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="correo">Correo</label>\n                                                <input type="email" class="form-control" id="correo${t.id}" name="correo" value="${t.correo}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="telefono">Telefono</label>\n                                                <input type="text" class="form-control" id="telefono${t.id}" name="telefono" value="${t.telefono}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="documento_identidad">DNI</label>\n                                                <input type="text" class="form-control" id="documento_identidad${t.id}" name="documento_identidad" value="${t.documento_identidad}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="fecha_nacimiento">Fecha de Nacimiento</label>\n                                                <input type="date" class="form-control" id="fecha_nacimiento${t.id}" name="fecha_nacimiento" value="${t.fecha_nacimiento}" />\n                                            </div>\n                                            <div class="modal-footer">\n                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>\n                                                <button type="button" class="btn btn-primary btn-actualizarCliente" data-id="${t.id}">Guardar</button>\n                                            </div>\n                                        </form>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        \x3c!-- Botón de eliminar --\x3e\n                        <button class="btn btn-sm btn-danger btn-eliminarCliente" data-id="${t.id}">\n                            <i class="fa-solid fa-trash"></i>\n                        </button>\n                    </td>\n                `,i.appendChild(n)}),i.addEventListener("click",(function(t){if(t.target.classList.contains("btn-actualizarCliente")){!async function(t){const e={id:t,nombre:document.querySelector("#nombre"+t).value.trim(),apellidos:document.querySelector("#apellidos"+t).value.trim(),correo:document.querySelector("#correo"+t).value.trim(),telefono:document.querySelector("#telefono"+t).value.trim(),documento_identidad:document.querySelector("#documento_identidad"+t).value.trim(),fecha_nacimiento:document.querySelector("#fecha_nacimiento"+t).value};await async function(t){const e=new FormData;Object.entries(t).forEach(([t,n])=>e.append(t,n));try{const n="http://localhost:3000/api/clientes/actualizar",i=await fetch(n,{method:"POST",body:e}),l=await i.json();a(l.titulo,l.mensaje,l.tipo);const d=document.querySelector("#editarClienteModal"+t.id);d&&$(d).modal("hide"),await o()}catch(t){console.log(t)}}(e)}(t.target.getAttribute("data-id"))}if(t.target.classList.contains("btn-eliminarCliente")){const n=t.target.getAttribute("data-id");e=n,Swal.fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(async t=>{if(t.isConfirmed)try{const t=new FormData;t.append("id",e);const n="http://localhost:3000/api/clientes/eliminar",i=await fetch(n,{method:"POST",body:t}),l=await i.json();a(l.titulo,l.mensaje,l.tipo),"success"===l.tipo&&await o()}catch(t){console.error(t)}})}var e}))}catch(t){console.log(t)}}(),t=$("#datatable_clients").DataTable(n),e=!0}function a(t,e,n){Swal.fire({icon:n,title:t,text:e}).then(()=>{document.querySelectorAll(".modal-editarCliente").forEach(t=>{$(t).hasClass("show")&&$(t).modal("hide")})})}o(),document.querySelector(".btnAgregarCliente").addEventListener("click",(async function(){const t={nombre:document.getElementById("nombre").value.trim(),apellidos:document.getElementById("apellidos").value.trim(),correo:document.getElementById("correo").value.trim(),telefono:document.getElementById("telefono").value.trim(),documento_identidad:document.getElementById("documento_identidad").value.trim(),fecha_nacimiento:document.getElementById("fecha_nacimiento").value};if(t.nombre&&t.apellidos&&t.correo)try{const e=new FormData;Object.entries(t).forEach(([t,n])=>e.append(t,n));const n="http://localhost:3000/api/clientes/crear",i=await fetch(n,{method:"POST",body:e}),l=await i.json();a(l.titulo,l.mensaje,l.tipo),$("#clientesModal").modal("hide"),await o()}catch(t){console.log(t)}else a("Error","Todos los campos son obligatorios","error")}))}(),function(){let t,e=!1;const n={destroy:!0,language:{url:"https://cdn.datatables.net/plug-ins/2.1.8/i18n/es-MX.json"},dom:'<"row mb-2"<"d-flex justify-content-start col-sm-6"f><"d-flex justify-content-end col-sm-6"B>><"row"<"col-sm-12"tr>><"row d-flex justify-content-between"<"col d-flex justify-content-start"l><"col d-flex justify-content-center"i><"col d-flex justify-content-end"p>>',buttons:[{extend:"excelHtml5",text:'<i class="fa-solid fa-file-excel"></i>',titleAttr:"Exportar a Excel",exportOptions:{columns:":not(.no-export)"},className:"btn btn-success"},{extend:"pdfHtml5",text:'<i class="fa-solid fa-file-pdf"></i>',titleAttr:"Exportar a PDF",exportOptions:{columns:":not(.no-export)"},className:"btn btn-danger"},{extend:"csvHtml5",text:'<i class="fa-solid fa-file-csv"></i>',titleAttr:"Exportar a CSV",exportOptions:{columns:":not(.no-export)"},className:"btn btn-primary"},{extend:"print",text:'<i class="fa-solid fa-print"></i>',titleAttr:"Imprimir",exportOptions:{columns:":not(.no-export)"},className:"btn btn-info"}],columnDefs:[{orderable:!1,targets:[3,8]},{visible:!1,targets:[5,6,13,14]}]};!async function(){e&&t.destroy();await async function(){const t={1:"Administrador",2:"General",3:"Limpieza"},e={0:"Inactivo",1:"Activo"};try{const n="http://localhost:3000/api/usuarios/listar",o=await fetch(n),a=await o.json(),i=document.getElementById("tableBody_users");i.innerHTML="",a.forEach((n,o)=>{const a=document.createElement("tr");a.innerHTML=`\n                    <td>${o+1}</td>\n                    <td>${n.nombre}</td>\n                    <td>${n.apellido}</td>\n                    <td>${n.direccion}</td>   \n                    <td>${n.email}</td>\n                    <td>${n.password}</td>\n                    <td>${n.password2}</td>\n                    <td>${n.fecha_nacimiento}</td>\n                    <td>${t[n.rol_id]}</td>\n                    <td>${e[n.estatus]}</td>\n                    <td>${n.fecha_creacion}</td>\n                    <td>${n.ultimo_acceso}</td>\n                    <td class="text-center">\n                        ${1==n.confirmado?'<i class="fa-solid fa-check-circle text-success" title="Confirmado"></i>':'<i class="fa-solid fa-times-circle text-danger" title="No Confirmado"></i>'}\n                    </td>\n                    <td>${n.password_actual}</td>\n                    <td>${n.password_nuevo}</td>\n                    <td>\n                        \x3c!-- Botón de editar que abre el modal --\x3e\n                        <button class="btn btn-sm btn-primary" data-toggle="modal" data-target="#editarUsuarioModal${n.id}">\n                            <i class="fa-solid fa-pen"></i>\n                        </button>\n\n                        \x3c!-- Modal Editar Cliente --\x3e\n                        <div class="modal fade modal-editarUsuario" id="editarUsuarioModal${n.id}" tabindex="-1" role="dialog" aria-labelledby="UsuarioModalLabel" aria-hidden="true">\n                            <div class="modal-dialog" role="document">\n                                <div class="modal-content">\n                                    <div class="modal-header">\n                                        <h5 class="modal-title" id="usuariosModalLabel">Editar Usuario</h5>\n                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                            <span aria-hidden="true">&times;</span>\n                                        </button>\n                                    </div>\n                                    <div class="modal-body">\n                                        <form method="POST">\n                                            <div class="form-group">\n                                                <label for="nombre">Nombre</label>\n                                                <input type="text" class="form-control" id="nombre${n.id}" name="nombre" value="${n.nombre}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="apellidos">Apellidos</label>\n                                                <input type="text" class="form-control" id="apellido${n.id}" name="apellidos" value="${n.apellido}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="direccion">Direccion</label>\n                                                <input type="text" class="form-control" id="direccion${n.id}" name="direccion" value="${n.direccion}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="correo">Correo</label>\n                                                <input type="email" class="form-control" id="correo${n.id}" name="correo" value="${n.email}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="fecha_nacimiento">Fecha de Nacimiento</label>\n                                                <input type="date" class="form-control" id="fecha_nacimiento${n.id}" name="fecha_nacimiento" value="${n.fecha_nacimiento}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="rol_id">Rol</label>\n                                                <select class="form-control" id="rol_id${n.id}" name="rol_id">\n                                                    <option value="1" ${1==n.rol_id?"selected":""}>Administrador</option>\n                                                    <option value="2" ${2==n.rol_id?"selected":""}>General</option>\n                                                    <option value="3" ${3==n.rol_id?"selected":""}>Limpieza</option>\n                                                </select>\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="estatus">Estatus</label>\n                                                <select class="form-control" id="estatus${n.id}" name="estatus">\n                                                    <option value="1" ${1==n.estatus?"selected":""}>Activo</option>\n                                                    <option value="0" ${0==n.estatus?"selected":""}>Inactivo</option>\n                                                </select>\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="confirmado">Confirmado</label>\n                                                <select class="form-control" id="confirmado${n.id}" name="confirmado">\n                                                    <option value="1" ${1==n.confirmado?"selected":""}>Confirmado</option>\n                                                    <option value="0" ${0==n.confirmado?"selected":""}>No Confirmado</option>\n                                                </select>\n                                            </div>\n                                            <div class="modal-footer">\n                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>\n                                                <button type="button" class="btn btn-primary btn-actualizarUsuario" data-id="${n.id}">Guardar</button>\n                                            </div>\n                                        </form>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    \n                        \x3c!-- Botón de eliminar --\x3e\n                        <button class="btn btn-sm btn-danger btn-eliminarCliente" data-id="${n.id}">\n                            <i class="fa-solid fa-trash"></i>\n                        </button>\n                    </td>\n                `,i.appendChild(a)}),i.addEventListener("click",(function(t){if(t.target.classList.contains("btn-actualizarUsuario")){!async function(t){const e={id:t,nombre:document.querySelector("#nombre"+t).value.trim(),apellido:document.querySelector("#apellido"+t).value.trim(),direccion:document.querySelector("#direccion"+t).value.trim(),email:document.querySelector("#correo"+t).value.trim(),fecha_nacimiento:document.querySelector("#fecha_nacimiento"+t).value,rol_id:document.querySelector("#rol_id"+t).value,estatus:document.querySelector("#estatus"+t).value,confirmado:document.querySelector("#confirmado"+t).value};console.log(e)}(t.target.getAttribute("data-id"))}if(t.target.classList.contains("btn-eliminarUsuario")){const e=t.target.getAttribute("data-id");confirmarEliminacionUsuario(e)}}))}catch(t){console.log(t)}}(),t=$("#datatable_users").DataTable(n),e=!0}()}();
//# sourceMappingURL=bundle.js.map
