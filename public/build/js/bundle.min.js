!function(){let t,e=!1;const n={destroy:!0,language:{url:"https://cdn.datatables.net/plug-ins/2.1.8/i18n/es-MX.json"},dom:'<"row mb-2"<"d-flex justify-content-start col-sm-6"f><"d-flex justify-content-end col-sm-6"B>><"row"<"col-sm-12"tr>><"row d-flex justify-content-between"<"col d-flex justify-content-start"l><"col d-flex justify-content-center"i><"col d-flex justify-content-end"p>>',buttons:[{extend:"excelHtml5",text:'<i class="fa-solid fa-file-excel"></i>',titleAttr:"Exportar a Excel",exportOptions:{columns:":not(.no-export)"},className:"btn btn-success"},{extend:"pdfHtml5",text:'<i class="fa-solid fa-file-pdf"></i>',titleAttr:"Exportar a PDF",exportOptions:{columns:":not(.no-export)"},className:"btn btn-danger"},{extend:"csvHtml5",text:'<i class="fa-solid fa-file-csv"></i>',titleAttr:"Exportar a CSV",exportOptions:{columns:":not(.no-export)"},className:"btn btn-primary"},{extend:"print",text:'<i class="fa-solid fa-print"></i>',titleAttr:"Imprimir",exportOptions:{columns:":not(.no-export)"},className:"btn btn-info"}],columnDefs:[{orderable:!1,targets:[3,4,7]}]};async function o(){e&&t.destroy(),await async function(){try{const t="http://localhost:3000/api/clientes/listar",e=await fetch(t),n=await e.json(),l=document.getElementById("tableBody_clients");l.innerHTML="",n.forEach((t,e)=>{const n=document.createElement("tr");n.innerHTML=`\n                    <td>${e+1}</td> \n                    <td>${t.nombre}</td>\n                    <td>${t.apellidos}</td>\n                    <td>${t.correo}</td>\n                    <td>${t.telefono}</td>\n                    <td>${t.documento_identidad}</td>\n                    <td>${t.fecha_nacimiento}</td>\n                    <td>\n                        \x3c!-- Botón de editar que abre el modal --\x3e\n                        <button class="btn btn-sm btn-primary" data-toggle="modal" data-target="#editarClienteModal${t.id}">\n                            <i class="fa-solid fa-pen"></i>\n                        </button>\n\n                        \x3c!-- Modal Editar Cliente --\x3e\n                        <div class="modal fade modal-editarCliente" id="editarClienteModal${t.id}" tabindex="-1" role="dialog" aria-labelledby="clientesModalLabel" aria-hidden="true">\n                            <div class="modal-dialog" role="document">\n                                <div class="modal-content">\n                                    <div class="modal-header">\n                                        <h5 class="modal-title" id="clientesModalLabel">Editar Cliente</h5>\n                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                            <span aria-hidden="true">&times;</span>\n                                        </button>\n                                    </div>\n                                    <div class="modal-body">\n                                        <form method="POST">\n                                            <div class="form-group">\n                                                <label for="nombre">Nombre</label>\n                                                <input type="text" class="form-control" id="nombre${t.id}" name="nombre" value="${t.nombre}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="apellidos">Apellidos</label>\n                                                <input type="text" class="form-control" id="apellidos${t.id}" name="apellidos" value="${t.apellidos}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="correo">Correo</label>\n                                                <input type="email" class="form-control" id="correo${t.id}" name="correo" value="${t.correo}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="telefono">Telefono</label>\n                                                <input type="text" class="form-control" id="telefono${t.id}" name="telefono" value="${t.telefono}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="documento_identidad">DNI</label>\n                                                <input type="text" class="form-control" id="documento_identidad${t.id}" name="documento_identidad" value="${t.documento_identidad}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="fecha_nacimiento">Fecha de Nacimiento</label>\n                                                <input type="date" class="form-control" id="fecha_nacimiento${t.id}" name="fecha_nacimiento" value="${t.fecha_nacimiento}" />\n                                            </div>\n                                            <div class="modal-footer">\n                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>\n                                                <button type="button" class="btn btn-primary btn-actualizarCliente" data-id="${t.id}">Guardar</button>\n                                            </div>\n                                        </form>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        \x3c!-- Botón de eliminar --\x3e\n                        <button class="btn btn-sm btn-danger btn-eliminarCliente" data-id="${t.id}">\n                            <i class="fa-solid fa-trash"></i>\n                        </button>\n                    </td>\n                `,l.appendChild(n)}),l.addEventListener("click",(function(t){if(t.target.classList.contains("btn-actualizarCliente")){!async function(t){const e={id:t,nombre:document.querySelector("#nombre"+t).value.trim(),apellidos:document.querySelector("#apellidos"+t).value.trim(),correo:document.querySelector("#correo"+t).value.trim(),telefono:document.querySelector("#telefono"+t).value.trim(),documento_identidad:document.querySelector("#documento_identidad"+t).value.trim(),fecha_nacimiento:document.querySelector("#fecha_nacimiento"+t).value};await async function(t){const e=new FormData;Object.entries(t).forEach(([t,n])=>e.append(t,n));try{const n="http://localhost:3000/api/clientes/actualizar",l=await fetch(n,{method:"POST",body:e}),i=await l.json();a(i.titulo,i.mensaje,i.tipo);const d=document.querySelector("#editarClienteModal"+t.id);d&&$(d).modal("hide"),await o()}catch(t){console.log(t)}}(e)}(t.target.getAttribute("data-id"))}if(t.target.classList.contains("btn-eliminarCliente")){const n=t.target.getAttribute("data-id");e=n,Swal.fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(async t=>{if(t.isConfirmed)try{const t=new FormData;t.append("id",e);const n="http://localhost:3000/api/clientes/eliminar",l=await fetch(n,{method:"POST",body:t}),i=await l.json();a(i.titulo,i.mensaje,i.tipo),"success"===i.tipo&&await o()}catch(t){console.error(t)}})}var e}))}catch(t){console.log(t)}}(),t=$("#datatable_clients").DataTable(n),e=!0}function a(t,e,n){Swal.fire({icon:n,title:t,text:e}).then(()=>{document.querySelectorAll(".modal-editarCliente").forEach(t=>{$(t).hasClass("show")&&$(t).modal("hide")})})}o(),document.querySelector(".btnAgregarCliente").addEventListener("click",(async function(){const t={nombre:document.getElementById("nombre").value.trim(),apellidos:document.getElementById("apellidos").value.trim(),correo:document.getElementById("correo").value.trim(),telefono:document.getElementById("telefono").value.trim(),documento_identidad:document.getElementById("documento_identidad").value.trim(),fecha_nacimiento:document.getElementById("fecha_nacimiento").value};if(t.nombre&&t.apellidos&&t.correo)try{const e=new FormData;Object.entries(t).forEach(([t,n])=>e.append(t,n));const n="http://localhost:3000/api/clientes/crear",l=await fetch(n,{method:"POST",body:e}),i=await l.json();a(i.titulo,i.mensaje,i.tipo),$("#clientesModal").modal("hide"),await o()}catch(t){console.log(t)}else a("Error","Todos los campos son obligatorios","error")}))}(),function(){let t,e=!1;const n={destroy:!0,language:{url:"https://cdn.datatables.net/plug-ins/2.1.8/i18n/es-MX.json"},dom:'<"row mb-2"<"d-flex justify-content-start col-sm-6"f><"d-flex justify-content-end col-sm-6"B>><"row"<"col-sm-12"tr>><"row d-flex justify-content-between"<"col d-flex justify-content-start"l><"col d-flex justify-content-center"i><"col d-flex justify-content-end"p>>',buttons:[{extend:"excelHtml5",text:'<i class="fa-solid fa-file-excel"></i>',titleAttr:"Exportar a Excel",exportOptions:{columns:":not(.no-export)"},className:"btn btn-success"},{extend:"pdfHtml5",text:'<i class="fa-solid fa-file-pdf"></i>',titleAttr:"Exportar a PDF",exportOptions:{columns:":not(.no-export)"},className:"btn btn-danger"},{extend:"csvHtml5",text:'<i class="fa-solid fa-file-csv"></i>',titleAttr:"Exportar a CSV",exportOptions:{columns:":not(.no-export)"},className:"btn btn-primary"},{extend:"print",text:'<i class="fa-solid fa-print"></i>',titleAttr:"Imprimir",exportOptions:{columns:":not(.no-export)"},className:"btn btn-info"}],columnDefs:[{orderable:!1,targets:[3,8]},{visible:!1,targets:[5,6,13,14]}]};!async function(){e&&t.destroy();await async function(){try{const t="http://localhost:3000/api/usuarios/listar",e=await fetch(t),n=await e.json();console.log(n);const o=document.getElementById("tableBody_users");o.innerHTML="",n.forEach((t,e)=>{const n=document.createElement("tr");n.innerHTML=`\n                    <td>${e+1}</td>\n                    <td>${t.nombre}</td>\n                    <td>${t.apellido}</td>\n                    <td>${t.direccion}</td>   \n                    <td>${t.email}</td>\n                    <td>${t.password}</td>\n                    <td>${t.password2}</td>\n                    <td>${t.fecha_nacimiento}</td>\n                    <td>${t.rol_id}</td>\n                    <td>${t.estatus}</td>\n                    <td>${t.fecha_creacion}</td>\n                    <td>${t.ultimo_acceso}</td>\n                    <td>${t.confirmado}</td>\n                    <td>${t.password_actual}</td>\n                    <td>${t.password_nuevo}</td>\n                    <td>\n                    \x3c!-- Botón de editar que abre el modal --\x3e\n                        <button class="btn btn-sm btn-primary" data-toggle="modal" data-target="#editarClienteModal${t.id}">\n                            <i class="fa-solid fa-pen"></i>\n                        </button>\n                    \n                    \x3c!-- Botón de eliminar --\x3e\n                        <button class="btn btn-sm btn-danger btn-eliminarCliente" data-id="${t.id}">\n                            <i class="fa-solid fa-trash"></i>\n                        </button>\n                    </td>\n                `,o.appendChild(n)})}catch(t){console.log(t)}}(),t=$("#datatable_users").DataTable(n),e=!0}()}();
//# sourceMappingURL=bundle.js.map
