!function(){let t,e=!1;const o={destroy:!0,language:{url:"https://cdn.datatables.net/plug-ins/2.1.8/i18n/es-MX.json"},dom:'<"row mb-2"<"d-flex justify-content-start col-sm-6"f><"d-flex justify-content-end col-sm-6"B>><"row"<"col-sm-12"tr>><"row d-flex justify-content-between"<"col d-flex justify-content-start"l><"col d-flex justify-content-center"i><"col d-flex justify-content-end"p>>',buttons:[{extend:"excelHtml5",text:'<i class="fa-solid fa-file-excel"></i>',titleAttr:"Exportar a Excel",exportOptions:{columns:":not(.no-export)"},className:"btn btn-success"},{extend:"pdfHtml5",text:'<i class="fa-solid fa-file-pdf"></i>',titleAttr:"Exportar a PDF",exportOptions:{columns:":not(.no-export)"},className:"btn btn-danger"},{extend:"csvHtml5",text:'<i class="fa-solid fa-file-csv"></i>',titleAttr:"Exportar a CSV",exportOptions:{columns:":not(.no-export)"},className:"btn btn-primary"},{extend:"print",text:'<i class="fa-solid fa-print"></i>',titleAttr:"Imprimir",exportOptions:{columns:":not(.no-export)"},className:"btn btn-info"}],columnDefs:[{orderable:!1,targets:[3,4,7]}]};async function n(){e&&t.destroy(),await async function(){try{const t="http://localhost:3000/api/clientes/listar",e=await fetch(t),o=await e.json(),i=document.getElementById("tableBody_clients");i.innerHTML="",o.forEach((t,e)=>{const o=document.createElement("tr");o.innerHTML=`\n                    <td>${e+1}</td> \n                    <td>${t.nombre}</td>\n                    <td>${t.apellidos}</td>\n                    <td>${t.correo}</td>\n                    <td>${t.telefono}</td>\n                    <td>${t.documento_identidad}</td>\n                    <td>${t.fecha_nacimiento}</td>\n                    <td>\n                        \x3c!-- Botón de editar que abre el modal --\x3e\n                        <button class="btn btn-sm btn-primary" data-toggle="modal" data-target="#editarClienteModal${t.id}">\n                            <i class="fa-solid fa-pen"></i>\n                        </button>\n\n                        \x3c!-- Modal Editar Cliente --\x3e\n                        <div class="modal fade modal-editarCliente" id="editarClienteModal${t.id}" tabindex="-1" role="dialog" aria-labelledby="clientesModalLabel" aria-hidden="true">\n                            <div class="modal-dialog" role="document">\n                                <div class="modal-content">\n                                    <div class="modal-header">\n                                        <h5 class="modal-title" id="clientesModalLabel">Editar Cliente</h5>\n                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                            <span aria-hidden="true">&times;</span>\n                                        </button>\n                                    </div>\n                                    <div class="modal-body">\n                                        <form method="POST">\n                                            <div class="form-group">\n                                                <label for="nombre">Nombre</label>\n                                                <input type="text" class="form-control" id="nombre${t.id}" name="nombre" value="${t.nombre}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="apellidos">Apellidos</label>\n                                                <input type="text" class="form-control" id="apellidos${t.id}" name="apellidos" value="${t.apellidos}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="correo">Correo</label>\n                                                <input type="email" class="form-control" id="correo${t.id}" name="correo" value="${t.correo}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="telefono">Telefono</label>\n                                                <input type="text" class="form-control" id="telefono${t.id}" name="telefono" value="${t.telefono}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="documento_identidad">DNI</label>\n                                                <input type="text" class="form-control" id="documento_identidad${t.id}" name="documento_identidad" value="${t.documento_identidad}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="fecha_nacimiento">Fecha de Nacimiento</label>\n                                                <input type="date" class="form-control" id="fecha_nacimiento${t.id}" name="fecha_nacimiento" value="${t.fecha_nacimiento}" />\n                                            </div>\n                                            <div class="modal-footer">\n                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>\n                                                <button type="button" class="btn btn-primary btn-actualizarCliente" data-id="${t.id}">Guardar</button>\n                                            </div>\n                                        </form>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        \x3c!-- Botón de eliminar --\x3e\n                        <button class="btn btn-sm btn-danger btn-eliminarCliente" data-id="${t.id}">\n                            <i class="fa-solid fa-trash"></i>\n                        </button>\n                    </td>\n                `,i.appendChild(o)}),i.addEventListener("click",(function(t){if(t.target.classList.contains("btn-actualizarCliente")){!async function(t){const e={id:t,nombre:document.querySelector("#nombre"+t).value.trim(),apellidos:document.querySelector("#apellidos"+t).value.trim(),correo:document.querySelector("#correo"+t).value.trim(),telefono:document.querySelector("#telefono"+t).value.trim(),documento_identidad:document.querySelector("#documento_identidad"+t).value.trim(),fecha_nacimiento:document.querySelector("#fecha_nacimiento"+t).value};await async function(t){const e=new FormData;Object.entries(t).forEach(([t,o])=>e.append(t,o));try{const o="http://localhost:3000/api/clientes/actualizar",i=await fetch(o,{method:"POST",body:e}),l=await i.json();a(l.titulo,l.mensaje,l.tipo);const d=document.querySelector("#editarClienteModal"+t.id);d&&$(d).modal("hide"),await n()}catch(t){console.log(t)}}(e)}(t.target.getAttribute("data-id"))}if(t.target.classList.contains("btn-eliminarCliente")){const o=t.target.getAttribute("data-id");e=o,Swal.fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(async t=>{if(t.isConfirmed)try{const t=new FormData;t.append("id",e);const o="http://localhost:3000/api/clientes/eliminar",i=await fetch(o,{method:"POST",body:t}),l=await i.json();a(l.titulo,l.mensaje,l.tipo),"success"===l.tipo&&await n()}catch(t){console.error(t)}})}var e}))}catch(t){console.log(t)}}(),t=$("#datatable_clients").DataTable(o),e=!0}function a(t,e,o){Swal.fire({icon:o,title:t,text:e}).then(()=>{document.querySelectorAll(".modal-editarCliente").forEach(t=>{$(t).hasClass("show")&&$(t).modal("hide")})})}n(),document.querySelector(".btnAgregarCliente").addEventListener("click",(async function(){const t={nombre:document.getElementById("nombre").value.trim(),apellidos:document.getElementById("apellidos").value.trim(),correo:document.getElementById("correo").value.trim(),telefono:document.getElementById("telefono").value.trim(),documento_identidad:document.getElementById("documento_identidad").value.trim(),fecha_nacimiento:document.getElementById("fecha_nacimiento").value};if(t.nombre&&t.apellidos&&t.correo)try{const e=new FormData;Object.entries(t).forEach(([t,o])=>e.append(t,o));const o="http://localhost:3000/api/clientes/crear",i=await fetch(o,{method:"POST",body:e}),l=await i.json();a(l.titulo,l.mensaje,l.tipo),$("#clientesModal").modal("hide"),await n()}catch(t){console.log(t)}else a("Error","Todos los campos son obligatorios","error")}))}(),function(){let t,e=!1;const o={destroy:!0,language:{url:"https://cdn.datatables.net/plug-ins/2.1.8/i18n/es-MX.json"},dom:'<"row mb-2"<"d-flex justify-content-start col-sm-6"f><"d-flex justify-content-end col-sm-6"B>><"row"<"col-sm-12"tr>><"row d-flex justify-content-between"<"col d-flex justify-content-start"l><"col d-flex justify-content-center"i><"col d-flex justify-content-end"p>>',buttons:[{extend:"excelHtml5",text:'<i class="fa-solid fa-file-excel"></i>',titleAttr:"Exportar a Excel",exportOptions:{columns:":not(.no-export)"},className:"btn btn-success"},{extend:"pdfHtml5",text:'<i class="fa-solid fa-file-pdf"></i>',titleAttr:"Exportar a PDF",exportOptions:{columns:":not(.no-export)"},className:"btn btn-danger"},{extend:"csvHtml5",text:'<i class="fa-solid fa-file-csv"></i>',titleAttr:"Exportar a CSV",exportOptions:{columns:":not(.no-export)"},className:"btn btn-primary"},{extend:"print",text:'<i class="fa-solid fa-print"></i>',titleAttr:"Imprimir",exportOptions:{columns:":not(.no-export)"},className:"btn btn-info"}],columnDefs:[{orderable:!1,targets:[3,8]},{visible:!1,targets:[5,6,13,14]}]};async function n(){e&&t.destroy(),await async function(){const t={1:"Administrador",2:"General",3:"Limpieza"},e={0:"Inactivo",1:"Activo"};try{const o="http://localhost:3000/api/usuarios/listar",i=await fetch(o),l=await i.json(),d=document.getElementById("tableBody_users");d.innerHTML="",l.forEach((o,n)=>{const a=document.createElement("tr");a.innerHTML=`\n                    <td>${n+1}</td>\n                    <td>${o.nombre}</td>\n                    <td>${o.apellido}</td>\n                    <td>${o.direccion}</td>   \n                    <td>${o.email}</td>\n                    <td>${o.password}</td>\n                    <td>${o.password2}</td>\n                    <td>${o.fecha_nacimiento}</td>\n                    <td>${t[o.rol_id]}</td>\n                    <td>${e[o.estatus]}</td>\n                    <td>${o.fecha_creacion}</td>\n                    <td>${o.ultimo_acceso}</td>\n                    <td class="text-center">\n                        ${1==o.confirmado?'<i class="fa-solid fa-check-circle text-success" title="Confirmado"></i>':'<i class="fa-solid fa-times-circle text-danger" title="No Confirmado"></i>'}\n                    </td>\n                    <td>${o.password_actual}</td>\n                    <td>${o.password_nuevo}</td>\n                    <td>\n                        \x3c!-- Botón de editar que abre el modal --\x3e\n                        <button class="btn btn-sm btn-primary" data-toggle="modal" data-target="#editarUsuarioModal${o.id}">\n                            <i class="fa-solid fa-pen"></i>\n                        </button>\n\n                        \x3c!-- Modal Editar Cliente --\x3e\n                        <div class="modal fade modal-editarUsuario" id="editarUsuarioModal${o.id}" tabindex="-1" role="dialog" aria-labelledby="UsuarioModalLabel" aria-hidden="true">\n                            <div class="modal-dialog" role="document">\n                                <div class="modal-content">\n                                    <div class="modal-header">\n                                        <h5 class="modal-title" id="usuariosModalLabel">Editar Usuario</h5>\n                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                            <span aria-hidden="true">&times;</span>\n                                        </button>\n                                    </div>\n                                    <div class="modal-body">\n                                        <form method="POST">\n                                            <div class="form-group">\n                                                <label for="nombre">Nombre</label>\n                                                <input type="text" class="form-control" id="nombre${o.id}" name="nombre" value="${o.nombre}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="apellidos">Apellidos</label>\n                                                <input type="text" class="form-control" id="apellido${o.id}" name="apellidos" value="${o.apellido}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="direccion">Direccion</label>\n                                                <input type="text" class="form-control" id="direccion${o.id}" name="direccion" value="${o.direccion}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="correo">Correo</label>\n                                                <input type="email" class="form-control" id="correo${o.id}" name="correo" value="${o.email}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="fecha_nacimiento">Fecha de Nacimiento</label>\n                                                <input type="date" class="form-control" id="fecha_nacimiento${o.id}" name="fecha_nacimiento" value="${o.fecha_nacimiento}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="rol_id">Rol</label>\n                                                <select class="form-control" id="rol_id${o.id}" name="rol_id">\n                                                    <option value="1" ${1==o.rol_id?"selected":""}>Administrador</option>\n                                                    <option value="2" ${2==o.rol_id?"selected":""}>General</option>\n                                                    <option value="3" ${3==o.rol_id?"selected":""}>Limpieza</option>\n                                                </select>\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="estatus">Estatus</label>\n                                                <select class="form-control" id="estatus${o.id}" name="estatus">\n                                                    <option value="1" ${1==o.estatus?"selected":""}>Activo</option>\n                                                    <option value="0" ${0==o.estatus?"selected":""}>Inactivo</option>\n                                                </select>\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="confirmado">Confirmado</label>\n                                                <select class="form-control" id="confirmado${o.id}" name="confirmado">\n                                                    <option value="1" ${1==o.confirmado?"selected":""}>Confirmado</option>\n                                                    <option value="0" ${0==o.confirmado?"selected":""}>No Confirmado</option>\n                                                </select>\n                                            </div>\n                                            <div class="modal-footer">\n                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>\n                                                <button type="button" class="btn btn-primary btn-actualizarUsuario" data-id="${o.id}">Guardar</button>\n                                            </div>\n                                        </form>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    \n                        \x3c!-- Botón de eliminar --\x3e\n                        <button class="btn btn-sm btn-danger btn-eliminarUsuario" data-id="${o.id}">\n                            <i class="fa-solid fa-trash"></i>\n                        </button>\n                    </td>\n                `,d.appendChild(a)}),d.addEventListener("click",(function(t){if(t.target.classList.contains("btn-actualizarUsuario")){!async function(t){const e={id:t,nombre:document.querySelector("#nombre"+t).value.trim(),apellido:document.querySelector("#apellido"+t).value.trim(),direccion:document.querySelector("#direccion"+t).value.trim(),email:document.querySelector("#correo"+t).value.trim(),fecha_nacimiento:document.querySelector("#fecha_nacimiento"+t).value,rol_id:document.querySelector("#rol_id"+t).value,estatus:document.querySelector("#estatus"+t).value,confirmado:document.querySelector("#confirmado"+t).value};await async function(t){const e=new FormData;Object.entries(t).forEach(([t,o])=>e.append(t,o));try{const o="http://localhost:3000/api/usuarios/actualizar",i=await fetch(o,{method:"POST",body:e}),l=await i.json();a(l.titulo,l.mensaje,l.tipo);const d=document.querySelector("#editarUsuarioModal"+t.id);d&&$(d).modal("hide"),await n()}catch(t){console.log(t)}}(e)}(t.target.getAttribute("data-id"))}if(t.target.classList.contains("btn-eliminarUsuario")){const o=t.target.getAttribute("data-id");e=o,Swal.fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(async t=>{if(t.isConfirmed)try{const t=new FormData;t.append("id",e);const o="http://localhost:3000/api/usuarios/eliminar",i=await fetch(o,{method:"POST",body:t}),l=await i.json();a(l.titulo,l.mensaje,l.tipo),"success"===l.tipo&&await n()}catch(t){console.error(t)}})}var e}))}catch(t){console.log(t)}}(),t=$("#datatable_users").DataTable(o),e=!0}function a(t,e,o){Swal.fire({icon:o,title:t,text:e}).then(()=>{document.querySelectorAll(".modal-editarUsuario").forEach(t=>{$(t).hasClass("show")&&$(t).modal("hide")})})}n()}();
//# sourceMappingURL=bundle.js.map
