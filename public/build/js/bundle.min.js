!function(){let t,e=!1;const n={destroy:!0,language:{url:"https://cdn.datatables.net/plug-ins/2.1.8/i18n/es-MX.json"},dom:'<"row mb-2"<"d-flex justify-content-start col-sm-6"f><"d-flex justify-content-end col-sm-6"B>><"row"<"col-sm-12"tr>><"row d-flex justify-content-between"<"col d-flex justify-content-start"l><"col d-flex justify-content-center"i><"col d-flex justify-content-end"p>>',buttons:[{extend:"excelHtml5",text:'<i class="fa-solid fa-file-excel"></i>',titleAttr:"Exportar a Excel",className:"btn btn-success"},{extend:"pdfHtml5",text:'<i class="fa-solid fa-file-pdf"></i>',titleAttr:"Exportar a PDF",className:"btn btn-danger"},{extend:"csvHtml5",text:'<i class="fa-solid fa-file-csv"></i>',titleAttr:"Exportar a CSV",className:"btn btn-primary"},{extend:"print",text:'<i class="fa-solid fa-print"></i>',titleAttr:"Imprimir",className:"btn btn-info"}],columnDefs:[{orderable:!1,targets:[3,4,7]}]};async function a(){e&&t.destroy(),await async function(){try{const t="http://localhost:3000/api/clientes/listar",e=await fetch(t),n=await e.json(),i=document.getElementById("tableBody_clients");i.innerHTML="",n.forEach((t,e)=>{const n=document.createElement("tr");n.innerHTML=`\n                    <td>${e+1}</td> \n                    <td>${t.nombre}</td>\n                    <td>${t.apellidos}</td>\n                    <td>${t.correo}</td>\n                    <td>${t.telefono}</td>\n                    <td>${t.documento_identidad}</td>\n                    <td>${t.fecha_nacimiento}</td>\n                    <td>\n                        \x3c!-- Botón de editar que abre el modal --\x3e\n                        <button class="btn btn-sm btn-primary" data-toggle="modal" data-target="#editarClienteModal${t.id}">\n                            <i class="fa-solid fa-pen"></i>\n                        </button>\n\n                        \x3c!-- Modal Editar Cliente --\x3e\n                        <div class="modal fade modal-editarCliente" id="editarClienteModal${t.id}" tabindex="-1" role="dialog" aria-labelledby="clientesModalLabel" aria-hidden="true">\n                            <div class="modal-dialog" role="document">\n                                <div class="modal-content">\n                                    <div class="modal-header">\n                                        <h5 class="modal-title" id="clientesModalLabel">Editar Cliente</h5>\n                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                                            <span aria-hidden="true">&times;</span>\n                                        </button>\n                                    </div>\n                                    <div class="modal-body">\n                                        <form method="POST">\n                                            <div class="form-group">\n                                                <label for="nombre">Nombre</label>\n                                                <input type="text" class="form-control" id="nombre${t.id}" name="nombre" value="${t.nombre}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="apellidos">Apellidos</label>\n                                                <input type="text" class="form-control" id="apellidos${t.id}" name="apellidos" value="${t.apellidos}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="correo">Correo</label>\n                                                <input type="email" class="form-control" id="correo${t.id}" name="correo" value="${t.correo}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="telefono">Telefono</label>\n                                                <input type="text" class="form-control" id="telefono${t.id}" name="telefono" value="${t.telefono}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="documento_identidad">DNI</label>\n                                                <input type="text" class="form-control" id="documento_identidad${t.id}" name="documento_identidad" value="${t.documento_identidad}" />\n                                            </div>\n                                            <div class="form-group">\n                                                <label for="fecha_nacimiento">Fecha de Nacimiento</label>\n                                                <input type="date" class="form-control" id="fecha_nacimiento${t.id}" name="fecha_nacimiento" value="${t.fecha_nacimiento}" />\n                                            </div>\n                                            <div class="modal-footer">\n                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>\n                                                <button type="button" class="btn btn-primary btn-actualizarCliente" data-id="${t.id}">Guardar</button>\n                                            </div>\n                                        </form>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        \x3c!-- Botón de eliminar --\x3e\n                        <button class="btn btn-sm btn-danger btn-eliminarCliente" data-id="${t.id}">\n                            <i class="fa-solid fa-trash"></i>\n                        </button>\n                    </td>\n                `,i.appendChild(n)}),i.addEventListener("click",(function(t){if(t.target.classList.contains("btn-actualizarCliente")){!function(t){const e=document.querySelector("#nombre"+t).value.trim(),n=document.querySelector("#apellidos"+t).value.trim(),i=document.querySelector("#correo"+t).value.trim(),l=document.querySelector("#telefono"+t).value.trim(),d=document.querySelector("#documento_identidad"+t).value.trim(),s=document.querySelector("#fecha_nacimiento"+t).value;!async function(t){const e=new FormData;e.append("id",t.id),e.append("nombre",t.nombre),e.append("apellidos",t.apellidos),e.append("correo",t.correo),e.append("telefono",t.telefono),e.append("documento_identidad",t.documento_identidad),e.append("fecha_nacimiento",t.fecha_nacimiento);try{const n="http://localhost:3000/api/clientes/actualizar",i=await fetch(n,{method:"POST",body:e}),l=await i.json();o(l.titulo,l.mensaje,l.tipo);const d=document.querySelector("#editarClienteModal"+t.id);d&&$(d).modal("hide"),await a()}catch(t){console.log(t)}}({id:t,nombre:e,apellidos:n,correo:i,telefono:l,documento_identidad:d,fecha_nacimiento:s})}(t.target.getAttribute("data-id"))}if(t.target.classList.contains("btn-eliminarCliente")){const n=t.target.getAttribute("data-id");e=n,Swal.fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(async t=>{if(t.isConfirmed)try{const t=new FormData;t.append("id",e);const n="http://localhost:3000/api/clientes/eliminar",i=await fetch(n,{method:"POST",body:t}),l=await i.json();o(l.titulo,l.mensaje,l.tipo),"success"===l.tipo&&await a()}catch(t){console.error(t)}})}var e}))}catch(t){console.log(t)}}(),t=$("#datatable_clients").DataTable(n),e=!0}function o(t,e,n){Swal.fire({icon:n,title:t,text:e}).then(()=>{document.querySelectorAll(".modal-editarCliente").forEach(t=>{$(t).hasClass("show")&&$(t).modal("hide")})})}a()}(),function(){let t,e=!1;const n={destroy:!0,language:{url:"https://cdn.datatables.net/plug-ins/2.1.8/i18n/es-MX.json"},columnDefs:[{orderable:!1,targets:[3,4,8]}]},a={1:"Administrador",2:"Empleado General",3:"Limpieza"},o={1:"Activo",0:"Inactivo"};async function i(){e&&t.destroy(),await async function(){try{const t="http://localhost:3000/api/usuarios/listar",e=await fetch(t),n=await e.json(),i=document.getElementById("tableBody_users");i.innerHTML="",n.forEach((t,e)=>{const n=document.createElement("tr");n.innerHTML=`\n                    <td>${e+1}</td> \n                    <td>${t.nombre}</td>\n                    <td>${t.apellido}</td>\n                    <td>${t.direccion}</td>\n                    <td>${t.email}</td>\n                    <td>${a[t.rol_id]}</td> \x3c!-- Muestra el rol legible --\x3e\n                    <td>${o[t.estatus]}</td> \x3c!-- Muestra el estatus legible --\x3e\n                    <td>${t.fecha_creacion}</td>\n                    <td>\n                        \x3c!-- Botón de editar --\x3e\n                        <button class="btn btn-sm btn-primary">\n                            <i class="fa-solid fa-pen"></i>\n                        </button>\n\n                        \x3c!-- Formulario para eliminar --\x3e\n                        <form method="POST" action="/admin/usuarios/eliminar" class="d-inline">\n                            <input type="hidden" name="id" value="${t.id}">\n                            <button class="btn btn-sm btn-danger" type="submit">\n                                <i class="fa-solid fa-trash"></i>\n                            </button>\n                        </form>\n                    </td>\n                `,i.appendChild(n)})}catch(t){console.log(t)}}(),t=$("#datatable_users").DataTable(n),e=!0}window.addEventListener("load",async()=>{await i()})}();
//# sourceMappingURL=bundle.js.map
